<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' https://cdn.socket.io https://unpkg.com; style-src 'self' 'unsafe-inline'; connect-src 'self' ws://localhost:* http://localhost:*; img-src 'self' data:; font-src 'self';" />
	<title>Remote Pad (Vue)</title>
	<style>
		body { font-family: system-ui, Arial, sans-serif; margin: 16px; }
		h1 { font-size: 18px; margin: 0 0 12px; display:flex; gap:12px; align-items:center; }
		h1 small { font-size:11px; font-weight:normal; color:#666; }
		textarea { width: 100%; font-family: monospace; font-size: 14px; padding: 8px; box-sizing: border-box; }
		#pad { height: 150px; }
		#logArea { height: 110px; margin-top:8px; white-space:pre; resize:vertical; }
		.stats { font-size:11px; color:#555; margin-top:4px; }
		.row { display:flex; gap:12px; }
		.row > * { flex:1; }
		.pill { background:#eee; padding:2px 6px; border-radius:10px; font-size:11px; }
		.remote { color:#0074d9; }
		.local { color:#2e8b57; }
	</style>
</head>
<body>
	<div id="app" v-cloak>
		<h1>
			Remote Pad
			<small><span class="pill">Conns: {{ connectionCount }}</span> <span class="pill">Chars: {{ totalChars }}</span></small>
		</h1>

		<textarea id="pad" v-model="padValue" placeholder="Type here..." @input="onInput"></textarea>
		<textarea id="logArea" readonly :value="logsJoined" placeholder="Event log..."></textarea>

		<div class="stats">Last event: {{ lastEvent || 'â€”' }}</div>

		<h3 style="margin-top:14px;font-size:14px;">Connected Clients</h3>
		<textarea id="clientsBox" readonly :value="clientListText" style="width:100%;height:80px;font-family:monospace;font-size:12px;"></textarea>
		<div style="margin-top:6px;display:flex;gap:6px;">
			<input v-model="disconnectId" placeholder="Client ID to disconnect" style="flex:1;padding:4px 6px;font-family:monospace;font-size:12px;" />
			<button @click="disconnectClient" style="padding:4px 10px;">Disconnect</button>
		</div>
	</div>

	<!-- Socket.IO (removed integrity attribute to avoid hash mismatch blocking) -->
	<script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
	<!-- Vue 3 (CDN) -->
	<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
	<!-- App logic -->
	<script src="index.logic.js"></script>
</body>
</html>
